## 常用密码技术

### 1.密码

#### 1.3秘钥

加密，解密的算法何在一起统称为密码算法

密码算法中需要秘钥。现实世界中的钥，是像钥匙这样的形状的微调而复杂的小金属片，然而，密码算法中的秘钥，则是像103....这样一大串数字

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/73fB2h2bIF.png?imageslim)

无论是在加密时还是解密时，都需要知道秘钥

### 2.对称加密

对称加密：也成为对称密码，是指在加密和解码使用同一秘钥加密方式

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/1dE1I1HJdi.png?imageslim)

#### 加密三要素

- 明文/密文
- 秘钥
- 算法-加密，解密

比特（Bit），字节（byte）

8bit=byte

#### 编码：

将显示世界中的东西映射为比特序列的操作



#### DES加密:

1977年美国联邦信息处理标准（Fips）中所采用的一种对称密码（FIPS46.3）

DES一直以来被美国以及其他国家的政府和银行等广泛使用，然后随机计算机的进步。现在已经能够暴力破解了

要求：他的密钥长度是56比特，尽管从规格上来说，DES的秘钥长度是64比特，但由于每隔7比特会设置一个用于错误检查的比特，因此实质上其秘钥长度是56比特

明文加密的分组操作

- 分组的长度==秘钥的长度
- 将每组数据和秘钥进行位运算
- 每组的密文长度==明文长度



### 3.分组密码的模式

- ECB模式 （电子密码本模式）
- CBC模式（密码分组链接模式）
- CFB模式（密文反馈模式）
- OFB模式 （输出反馈模式）
- CTR模式 （计数器模式）

#### ECB模式 （电子密码本模式）

将明文分组加密之后的结果将成为密文分组

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/IFLIkebfde.png?imageslim)

#### CBC模式（密码分组链接模式）

首先将明文分组与前一个密文分组进行XOR（按位或）运算，然后在进行加密

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/43FL4fbKGg.png?imageslim)

对明文进行分组，长度不是8字节的整数倍，应该如何处理？

- 加密：最后一个分组不够8字节，需要填充满8字节
- 解密：最后一组需要将填充的数据去掉，才能得到原始数据

如果最后一个分组是秘钥长度的整数倍，在末尾添加一分组，分组中每个字节的值和当前的长度相等

当分组长度不够的时候，填充方式：

- 计算出要填充的字节数，假设是6
- 每个字节填充的字节值设置为6
- 解密之后，将最后一个字节的值去除转换成整形数
- 得到的这个数就是要删除的字节数

AES>3DES>DES

效率高至今未被破解

#### DES

- 秘钥长度64bit 8字节
- 数据分组，每组数据8字节

#### 3DES

- 需要三个秘钥

  - 每个秘钥8字节，一共24字节
  - 数据分组也是8字节一组

- 加密的情况分析

  - 三个秘钥不通

    - 数据被加密三次

  - 秘钥1,2相同，和3不同

    - 被3加密一次

  - 秘钥1,3相同 和2不同

    - 被2加密一次

  - 秘钥1,2,3相同

    - 和DES一样

    

#### AES

- 要求的秘钥长度 16-24-32字节
- 在go的接口中指定的秘钥长度为16字节
- 分组长度 16-24-32字节
- 分组长度和秘钥长度相等

### 4.非对称加密

非对称加密：使用公钥加密，使用私钥解密

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/gd8a0Hgm3G.png?imageslim)



加密解密使用私钥不同

私钥是一个密钥对

- 公钥-可以公开
- 私钥-需要保护好，不能邪路

加解密的过程

- 如果使用公钥加密，必须要私钥解密
- 如果使用私钥加密，必须使用公钥解密

对称加密和非对称加密的对比

- 私钥分发

  - 对称加密存在私钥分发困难
  - 非对称加密分发简单

- 效率问题

  - 对称加密对数据加密效率高
  - 非对称加密效率低

- 数据加密之后的安全等级

  - 对称加密安全级别不如非对称加密

  #### 秘钥分发

  ![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/cDKHGlA6kB.png?imageslim)

  #### RSA

  ##### 加密

  ![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/1b4miegGGB.png?imageslim)

  E:是加密的首字母 N是数字的首字母

  ##### 解密

  ![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/5HE60ehAef.png?imageslim)

  D：是解密的首字母 ,N是数字的首字母

##### 加密和解密的过程

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180917/JJH92aH3kD.png?imageslim)

##### 生成私钥操作流程概述

1. 使用rsa中Generatekey方法生成私钥
2. 通过X509标准将得到的RAS私钥序列化成ASN.1的DER编码字符串
3. 将私钥字符串设置到pem格式块中
4. 通过pem将设置好的数据进行编码，并写入磁盘文件中

##### 生成公钥操作流程

1. 从得到的私钥对象中将公钥信息去除
2. 通过X509标准得到的rsa公钥序列化为字符串
3. 将公钥字符串设置到pe格式块中
4. 通过pem将设置好的数据进行编码，并写入磁盘文件

##### X.509

它是一种非常通用的证书格式。所有证书否符合ITU-T.509国际标准，因此为一种应用创建证书可以用于任何其他符合该标准的应用

X.509证书的结构是用ASN1进行描述数据结构并使用ASN.1进行编码

一般来说一个数字证书可能包括基本数据（版本，序列号）、所签名对象信息（签名算法类型、签发者信息、有效期、被签发人、签发的公开秘钥）、CA的数字签名

##### PKCS15个标准

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180918/LADedHeb4c.png?imageslim)

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180918/dhc6lmaJfJ.png?imageslim)

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180918/Be7d0lmhF1.png?imageslim)

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180918/H6GmL6lLhE.png?imageslim)

### 5.单向散列函数

单向散列函数---获取消息的指纹

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180918/5L2gEHHKkj.png?imageslim)

计算出的散列值永远是20字节

##### 单向散列的性质

- 根据任意长度的消息计算出固定长度的散度值
- 能够快速计算出三列值
- 消息不同散列值也不同

##### 实际应用

- 检测软件是否被篡改
- 消息认证码 （msg+key）Use Hash-》msg+hash 发送---接收 验证 
- 数字签名 消息认证码高级版-变成非对称加密解除分发困难
- 伪随机数生成器
- 一次性口令

消息认证码也存在分发困难



##### 常用的单向散列函数md4,md5

md4,md5能够产生128比特的散列值

而且强抗碰撞性已经被攻破

##### 常用的单向散列函数SHA-1,224,256,384,512

![mark](http://7xnk07.com1.z0.glb.clouddn.com/blog/180918/86eDf9gG2m.png?imageslim)



### 6.消息认证码

### 7.数字签名

### 8.证书

### 9.SSL/TLS

### 参考资料